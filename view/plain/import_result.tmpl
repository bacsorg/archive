<% c++ #include <bacs/archive/web/content/form.hpp> %>
<% skin plain %>
    <% view import_result uses bacs::archive::web::content::import_result extends base_form %>
        <% template scripts() %>
            <% include base_form::scripts() %>
            <script src="/static/plain/protobuf.js" type="text/javascript"></script>
        <% end template %>
        <% template subtitle() %>
            <% gt "Import results" %>
        <% end template %>
        <% template form() %>
            <h3><% gt "Get import results" %></h3>
            <form method="post" action="">
                <% form as_p form %>
            </form>
        <% end template %>
        <% template result() %>
            <% if result %>
                <% foreach id_result in result->entry() %>
                    <table border="1" cellspacing="0" cellpadding="10">
                        <caption><% gt "Problem import result" %></caption>
                        <tr>
                            <th><% gt "Problem" %></th>
                            <th><% gt "Import result" %></th>
                        </tr>
                        <% item %>
                            <tr>
                                <td><%= id_result.first %></td>
                                <td>
                                    <% if id_result.second.error().empty() %>
                                        <div class="protobuf">
                                            <div class="spoiler">
                                                <span class="action">
                                                    <% gt "Show" %>&nbsp;"<%= id_result.second.problem().system().problem_type() %>"&nbsp;<% gt "import result" %>
                                                </span>
                                                <span class="action" style="display: none">
                                                    <% gt "Hide" %>&nbsp;"<%= id_result.second.problem().system().problem_type() %>"&nbsp;<% gt "import result" %>
                                                </span>
                                            </div>
                                            <pre style="display: none"><%= id_result.second.problem().DebugString() %></pre>
                                        </div>
                                    <% else %>
                                        <pre class="error"><%= id_result.second.error() %></pre>
                                    <% end %>
                                </td>
                            </tr>
                        <% end %>
                    </table>
                <% empty %>
                    <% gt "There are no problems available." %>
                <% end %>
            <% end %>
        <% end template %>
    <% end view %>
<% end skin %>
